---
title: "Identify all Buccal Cells"
format:
  html:
    css: styles.css
    page-layout: full
---

<div class="shell" style="display:grid;place-items:center;min-height:100vh;background:#f3f4f6;">
  <main class="card" style="background:white;padding:2rem 3rem;border-radius:1rem;box-shadow:0 10px 20px rgba(0,0,0,.05);text-align:center;width:min(800px,90%);">
    <h2 style="font-weight:700;margin-bottom:1.5rem;">Identify all Buccal Cells</h2>

<!-- Image Grid -->
<form id="buccal-form">
  <div class="grid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:2rem;">
  <!-- 6 clickable images -->
  <label class="img-choice">
      <input type="checkbox" name="cell" value="assets/buccal1.png" hidden>
      <img src="assets/bucCell1.png" alt="cell 1">
    </label>

  <label class="img-choice">
      <input type="checkbox" name="cell" value="assets/buccal2.png" hidden>
      <img src="assets/bucCell2.png" alt="cell 2">
    </label>

  <label class="img-choice">
      <input type="checkbox" name="cell" value="assets/buccal3.png" hidden>
      <img src="assets/bucCell3.png" alt="cell 3">
    </label>

  <label class="img-choice">
      <input type="checkbox" name="cell" value="assets/buccal4.png" hidden>
      <img src="assets/bucCell4.png" alt="cell 4">
    </label>

  <label class="img-choice">
      <input type="checkbox" name="cell" value="assets/buccal5.png" hidden>
      <img src="assets/bucCell5.png" alt="cell 5">
    </label>

  <label class="img-choice">
      <input type="checkbox" name="cell" value="assets/buccal6.png" hidden>
      <img src="assets/bucCell6.png" alt="cell 6">
    </label>
  </div>

  <!-- Submit button -->
  <button type="submit" class="btn" style="background:#d1d5db;color:#000;padding:.6rem 2rem;border-radius:2rem;border:none;cursor:pointer;font-weight:600;">Submit</button>
</form>

  </main>
</div>

<script>
// --- minimal scoring helper (shared across pages) ---
function addLesson3Score(score, total) {
  const s = Number(localStorage.getItem('lesson3Score') || 0);
  const t = Number(localStorage.getItem('lesson3Total') || 0);
  localStorage.setItem('lesson3Score', s + score);
  localStorage.setItem('lesson3Total', t + total);
}

// OPTIONAL: start fresh if user comes here directly
if (!sessionStorage.getItem('lesson3Started')) {
  localStorage.removeItem('lesson3Score');
  localStorage.removeItem('lesson3Total');
  sessionStorage.setItem('lesson3Started', '1');
}

// Handle selection styling
const choices = document.querySelectorAll('.img-choice');
choices.forEach(choice => {
  choice.addEventListener('click', () => {
    const input = choice.querySelector('input');
    input.checked = !input.checked;
    choice.classList.toggle('selected', input.checked);
  });
});

// Handle form submission
const form = document.getElementById('buccal-form');
form.addEventListener('submit', e => {
  e.preventDefault();
  const selected = [...form.querySelectorAll('input:checked')].map(i => i.value);
  if (selected.length === 0) {
    alert('Please select at least one buccal cell image.');
    return;
  }
  // RANDOM demo "correct" set (uses your exact input values)
  const correct = new Set([
    "assets/buccal2.png",
    "assets/buccal4.png",
    "assets/buccal6.png",
  ]);
  const scoreThisPage = selected.filter(v => correct.has(v)).length;
  const totalThisPage = correct.size;

  addLesson3Score(scoreThisPage, totalThisPage);

  // go to Saliva page (your flow)
  window.location.href = 'saliva.html';
});
</script>

<style>
  .img-choice img { width: 100%; height: auto; border-radius: 0.5rem; border: 3px solid transparent; cursor: pointer; transition: border-color .2s, transform .1s; }
  .img-choice img:hover { transform: scale(1.02); }
  .img-choice.selected img { border-color: #2563eb; box-shadow: 0 0 0 4px rgba(37,99,235,.2); }
</style>
